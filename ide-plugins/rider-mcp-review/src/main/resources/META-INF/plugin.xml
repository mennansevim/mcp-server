<idea-plugin>
    <id>com.mcpreview.rider</id>
    <name>MCP AI Code Review</name>
    <version>1.0.0</version>
    <vendor email="support@mcpreview.com" url="https://github.com/mcp-review">MCP Review</vendor>

    <description><![CDATA[
    <h2>ðŸ¤– MCP AI Code Review for Rider</h2>
    <p>AI-powered code review directly in your IDE.</p>
    
    <h3>Features:</h3>
    <ul>
        <li>Review current file or selection</li>
        <li>Review staged changes (git diff)</li>
        <li>Review uncommitted changes</li>
        <li>Inline issue highlighting</li>
        <li>Quick-fix suggestions</li>
    </ul>
    
    <h3>Setup:</h3>
    <p>Configure your MCP Server URL in Settings â†’ Tools â†’ MCP Code Review</p>
    ]]></description>

    <change-notes><![CDATA[
    <h3>1.0.0</h3>
    <ul>
        <li>Initial release</li>
        <li>Git diff review support</li>
        <li>Tool window with review results</li>
    </ul>
    ]]></change-notes>

    <idea-version since-build="233" until-build="243.*"/>

    <depends>com.intellij.modules.platform</depends>
    <depends>Git4Idea</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Settings -->
        <applicationConfigurable 
            parentId="tools" 
            instance="com.mcpreview.rider.settings.McpSettingsConfigurable"
            id="com.mcpreview.rider.settings"
            displayName="MCP Code Review"/>
        
        <applicationService 
            serviceImplementation="com.mcpreview.rider.settings.McpSettings"/>
        
        <!-- Tool Window -->
        <toolWindow 
            id="MCP Review" 
            anchor="bottom" 
            icon="/icons/mcp-review.svg"
            factoryClass="com.mcpreview.rider.ui.McpToolWindowFactory"/>
        
        <!-- Notifications -->
        <notificationGroup 
            id="MCP Code Review" 
            displayType="BALLOON"/>
    </extensions>

    <actions>
        <!-- Main Menu -->
        <group id="McpReview.Menu" text="MCP Review" popup="true">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            
            <action id="McpReview.ReviewFile" 
                    class="com.mcpreview.rider.actions.ReviewCurrentFileAction"
                    text="Review Current File" 
                    description="Review the current file with AI"
                    icon="/icons/review-file.svg">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt R"/>
            </action>
            
            <action id="McpReview.ReviewSelection" 
                    class="com.mcpreview.rider.actions.ReviewSelectionAction"
                    text="Review Selection" 
                    description="Review selected code with AI"
                    icon="/icons/review-selection.svg">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt shift R"/>
            </action>
            
            <separator/>
            
            <action id="McpReview.ReviewStagedChanges" 
                    class="com.mcpreview.rider.actions.ReviewStagedChangesAction"
                    text="Review Staged Changes" 
                    description="Review git staged changes"
                    icon="/icons/review-staged.svg"/>
            
            <action id="McpReview.ReviewUncommittedChanges" 
                    class="com.mcpreview.rider.actions.ReviewUncommittedChangesAction"
                    text="Review Uncommitted Changes" 
                    description="Review all uncommitted changes"
                    icon="/icons/review-uncommitted.svg"/>
        </group>
        
        <!-- Editor Popup Menu -->
        <group id="McpReview.EditorPopup">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <separator/>
            <reference ref="McpReview.ReviewSelection"/>
        </group>
        
        <!-- VCS Menu -->
        <group id="McpReview.VcsMenu">
            <add-to-group group-id="Vcs.MainMenu" anchor="last"/>
            <separator/>
            <reference ref="McpReview.ReviewStagedChanges"/>
            <reference ref="McpReview.ReviewUncommittedChanges"/>
        </group>
    </actions>
</idea-plugin>

